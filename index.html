<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ZILA Presale | ZILA AI</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.min.js"></script>

<style>
*{box-sizing:border-box}
body{
  margin:0;
  font-family:Arial,Helvetica,sans-serif;
  color:#fff;
  background:#05080f;
  overflow-x:hidden;
}

/* ===== 3D ANIMATED BACKGROUND ===== */
.bg3d{
  position:fixed;
  inset:0;
  z-index:-1;
  background:
    radial-gradient(circle at 20% 20%,#00ff9c33,transparent 40%),
    radial-gradient(circle at 80% 30%,#1a2a6c55,transparent 45%),
    linear-gradient(120deg,#020617,#020617);
  animation:bgmove 20s infinite alternate ease-in-out;
}
@keyframes bgmove{
  0%{filter:hue-rotate(0deg)}
  100%{filter:hue-rotate(20deg)}
}

/* ===== NAVBAR ===== */
.navbar{
  position:fixed;
  top:0;
  width:100%;
  padding:14px 22px;
  display:flex;
  align-items:center;
  backdrop-filter:blur(14px);
  background:rgba(10,15,25,.7);
  z-index:1000;
}
.navbar b{font-size:18px}
.navbar a{
  margin-left:18px;
  color:#fff;
  text-decoration:none;
  font-size:14px;
}
.navbar button{
  margin-left:auto;
  padding:10px 22px;
  border:none;
  border-radius:20px;
  background:#00ff9c;
  font-weight:bold;
  cursor:pointer;
}

/* ===== LAYOUT ===== */
.container{
  padding-top:120px;
  max-width:720px;
  margin:auto;
  padding-left:16px;
  padding-right:16px;
}
.card{
  background:rgba(20,30,45,.8);
  backdrop-filter:blur(18px);
  border-radius:26px;
  padding:34px;
  margin-bottom:80px;
  box-shadow:0 30px 80px rgba(0,0,0,.6);
}

/* ===== HERO IMAGE ===== */
.hero-img{
  width:100%;
  height:220px;
  border-radius:22px;
  background:url("https://images.unsplash.com/photo-1640340434855-6084b1f4901c") center/cover;
  margin-bottom:24px;
}

.section-img{
  width:100%;
  height:200px;
  border-radius:22px;
  background-size:cover;
  background-position:center;
  margin-bottom:22px;
}

/* ===== FORM ===== */
input,select,button{
  width:100%;
  padding:14px;
  margin-top:14px;
  border-radius:14px;
  border:none;
}
button.action{
  background:#00ff9c;
  font-weight:bold;
  cursor:pointer;
}
.status{
  margin-top:12px;
  font-size:13px;
  color:#00ff9c;
}
</style>
</head>

<body>

<div class="bg3d"></div>

<!-- NAVBAR -->
<div class="navbar">
  <b>ZILA</b>
  <a href="#presale">Presale</a>
  <a href="#staking">Staking</a>
  <a href="#zilaai">ZILA AI</a>
  <button id="connectBtn" onclick="connectWallet()">Connect Wallet</button>
</div>

<div class="container">

<!-- HERO -->
<div class="card">
  <div class="hero-img"></div>
  <h1>ZILA Presale</h1>
  <p>
    ZILA is a next-generation blockchain ecosystem combining
    <b>staking, AI infrastructure, and long-term token utility</b>.
  </p>
</div>

<!-- PRESALE -->
<div id="presale" class="card">
  <div class="section-img" style="background-image:url('https://images.unsplash.com/photo-1621504450181-5d356f61d307')"></div>

  <h2>Presale ZILA â€“ X10 Potential</h2>

  <p>
    ðŸ”¹ Presale Price: <b>0.000625 POL / ZILA</b><br>
    ðŸ”¹ Listing Price: <b>0.0065 POL / ZILA</b><br>
    ðŸ”¹ Potential: <b>10Ã—</b>
  </p>

  <p>
    Token distribution:<br>
    â€¢ 10% unlocked at TGE<br>
    â€¢ 90% vested automatically
  </p>

  <input id="buyAmount" placeholder="POL amount (min 10)">
  <button class="action" onclick="buyZila()">Buy ZILA</button>
  <button onclick="claimPresale()">Claim Presale</button>

  <div class="status" id="presaleStatus"></div>
</div>

<!-- STAKING -->
<div id="staking" class="card">
  <div class="section-img" style="background-image:url('https://images.unsplash.com/photo-1639322537138-5e513100b36e')"></div>

  <h2>Stake ZILA</h2>

  <select id="plan">
    <option value="0">Flexible</option>
    <option value="1">5 Months</option>
    <option value="2">1 Year</option>
  </select>

  <input id="stakeAmount" placeholder="ZILA amount">
  <button class="action" onclick="stakeZila()">Stake</button>

  <div class="status" id="stakeStatus"></div>
</div>

<!-- ZILA AI -->
<div id="zilaai" class="card">
  <div class="section-img" style="background-image:url('https://images.unsplash.com/photo-1677442136019-21780ecad995')"></div>

  <h2>ZILA AI</h2>

  <p>
    ZILA AI is an advanced decentralized AI layer designed to support
    on-chain automation, predictive analytics, and AI-powered dApps.
  </p>

  <p>
    ZILA AI will integrate smart decision systems,
    blockchain data analysis, and scalable AI execution
    using ZILA as the core utility token.
  </p>

  <p>
    ðŸ”¹ AI Governance<br>
    ðŸ”¹ AI Staking Incentives<br>
    ðŸ”¹ AI Data Marketplace
  </p>
</div>

</div>

<script>
let provider, signer, user;

/* ===== ADDRESSES (LOCKED) ===== */
const PRESALE="0x72cF8781aa3A6D7FD3324CD0dAA8b858461849d7";
const ZILA_TOKEN="0xE54c126BfE1cdA9A347F2a35DFAc5a9ca155f9A9";
const STAKING="0xef1CC2A23c0023093C545044d9f7154863715a27";

/* ===== ABI ===== */
const presaleABI=[
 "function buy() payable",
 "function claim()"
];
const tokenABI=[
 "function approve(address,uint256) returns(bool)",
 "function allowance(address,address) view returns(uint256)"
];
const stakingABI=[
 "function stake(uint256,uint8)",
 "function claim()"
];

/* ===== CONNECT WALLET (FIXED) ===== */
async function connectWallet(){
  if(typeof window.ethereum==="undefined"){
    alert("Wallet not detected. Open with MetaMask / OKX / Trust Browser");
    return;
  }
  try{
    await ethereum.request({method:"eth_requestAccounts"});
    await ethereum.request({
      method:"wallet_switchEthereumChain",
      params:[{chainId:"0x89"}]
    });
    provider=new ethers.providers.Web3Provider(window.ethereum);
    signer=provider.getSigner();
    user=await signer.getAddress();
    connectBtn.innerText=user.slice(0,4)+"***"+user.slice(-4)+" TERHUBUNG";
  }catch(e){
    alert("Wallet connection rejected");
  }
}

/* ===== PRESALE ===== */
async function buyZila(){
  if(!user) return alert("Connect wallet first");
  const val=buyAmount.value;
  if(val<10) return alert("Minimum 10 POL");
  const c=new ethers.Contract(PRESALE,presaleABI,signer);
  presaleStatus.innerText="Processing...";
  await (await c.buy({value:ethers.utils.parseEther(val)})).wait();
  presaleStatus.innerText="Buy success";
}
async function claimPresale(){
  const c=new ethers.Contract(PRESALE,presaleABI,signer);
  presaleStatus.innerText="Claiming...";
  await (await c.claim()).wait();
  presaleStatus.innerText="Claimed";
}

/* ===== STAKING ===== */
async function stakeZila(){
  const amt=stakeAmount.value;
  const p=plan.value;
  const token=new ethers.Contract(ZILA_TOKEN,tokenABI,signer);
  const staking=new ethers.Contract(STAKING,stakingABI,signer);
  const allow=await token.allowance(user,STAKING);
  if(allow.lt(ethers.utils.parseEther(amt))){
    await (await token.approve(STAKING,ethers.constants.MaxUint256)).wait();
  }
  stakeStatus.innerText="Staking...";
  await (await staking.stake(ethers.utils.parseEther(amt),p)).wait();
  stakeStatus.innerText="Staked";
}
</script>

</body>
</html>
